`Home <index.html>`__ OpenStack-Ansible Installation Guide

Appendix F. Using Nuage Neutron Plugin
--------------------------------------

Introduction
============

This document describes the steps required to deploy Nuage Networks VCS
with OpenStack-Ansible (OSA). These steps include:

- Install prerequisites.

- Configure Neutron to use the Nuage Networks Neutron plugin.

- Configure the Nuage Networks Neutron plugin.

- Download Nuage Networks VCS components and playbooks.

- Execute the playbooks.

Prerequisites
=============

#. The deployment environment has been configured according to OSA
   best-practices. This includes cloning OSA software and bootstrapping
   Ansible. See `OpenStack-Ansible Install Guide <index.html>`_
#. VCS stand-alone components, VSD and VSC, have been configured and
   deployed. (See Nuage Networks VSD and VSC Install Guides.)
#. Nuage VRS playbooks have been cloned to the deployment host from
   `https://github.com/nuagenetworks/nuage-openstack-ansible <https://github.com/nuagenetworks/nuage-openstack-ansible>`_.
   This guide assumes a deployment host path of
   /opt/nuage-openstack-ansible

Configure Nuage Neutron Plugin
==============================

Configuring the Neutron plugin requires creating/editing of parameters
in following two files:

- ``/etc/openstack_deploy/user_nuage_vars.yml``

- ``/etc/openstack_deploy/user_variables.yml``

On the deployment host, copy the Nuage user variables file from
``/opt/nuage-openstack-ansible/etc/user_nuage_vars.yml`` to
``/etc/openstack_deploy/`` folder.

   .. code-block:: shell-session

      # cp /opt/nuage-openstack-ansible/etc/user_nuage_vars.yml /etc/openstack_deploy/

Also modify the following parameters in this file as per your Nuage VCS environment:

#. Replace *VSD Enterprise Name* parameter with user desired name of VSD
   Enterprise:

   .. code-block:: yaml

      nuage_net_partition_name: "<VSD Enterprise Name>"

#. Replace *VSD IP* and *VSD GUI Port* parameters as per your VSD
   configuration:

   .. code-block:: yaml

      nuage_vsd_ip: "<VSD IP>:<VSD GUI Port>"

#. Replace *VSD Username, VSD Password* and *VSD Organization Name* with
   login credentials for VSD GUI as per your environment:

   .. code-block:: yaml

      nuage_vsd_username: "<VSD Username>"

      nuage_vsd_password: "<VSD Password>"

      nuage_vsd_organization: "<VSD Organization Name>"

#. Replace *Nuage VSP Version* with the Nuage VSP release you plan on
   using for Integration; For eg: If you seem to use Nuage VSP release 3.2;
   this value would be *v3\_2*

   .. code-block:: yaml

      nuage_base_uri_version: "<Nuage VSP Version>"

#. Replace *Nuage VSD CMS Id* with the CMS-Id generated by VSD to manage
   your OpenStack cluster:

   .. code-block:: yaml

      nuage_cms_id: "<Nuage VSD CMS Id>"

#. Replace *Active VSC-IP* with the IP address of your active VSC node
   and *Standby VSC-IP* with the IP address of your standby VSC node.

   .. code-block:: yaml

      active_controller: "<Active VSC-IP>"

      standby_controller: "<Standby VSC-IP>"

#. Replace *Local Package Repository* with the link of your local
   repository hosting the Nuage VRS packages, e.g. ``http://192.0.2.10/debs/3.2/vrs/``

   .. code-block:: yaml

      nuage_vrs_debs_repo: "deb <Local Package Repository>"

#. On the Deployment host, add the following lines to your
   ``/etc/openstack_deploy/user_variables.yml`` file, replacing the
   *Local PyPi Mirror URL* with the link to the pypi server hosting your
   Nuage OpenStack Python packages in “.whl” format.

   .. code-block:: yaml

      neutron_plugin_type: "nuage"
      nova_network_type: "nuage"
      pip_links:
        - { name: "openstack_release", link: "{{ openstack_repo_url }}/os-releases/{{ openstack_release }}/" }
        - { name: "nuage_repo", link: "<Local PyPi Mirror URL>" }

Installation
============

#. After multi-node OpenStack cluster is setup as detailed above; start
   the OpenStack deployment as listed in the OpenStack-Ansible Install guide by
   running all playbooks in sequence on the deployment host

#. After OpenStack deployment is complete; run the Nuage VRS playbooks
   in ``/opt/nuage-openstack-ansible/nuage_playbook`` on
   your deployment host to deploy Nuage VRS on all compute target hosts in
   the OpenStack cluster:

   .. code-block:: shell-session

      # cd /opt/nuage-openstack-ansible/nuage_playbooks
      # openstack-ansible nuage_all.yml

Note: For Nuage Networks VSP software packages, user documentation and licenses
please reach out with a query to info@nuagenetworks.net

--------------

.. include:: navigation.txt
